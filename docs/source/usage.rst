Usage
=====

.. argparse::
    :module: shis.server
    :func: make_parser
    :prog: shis.server
    :nodescription:
    :nodefault:

    SHIS provides a number of options that can help you with customizatiion.

    -c --clean : @after
        If ``thumb_dir`` already exists, SHIS does not attempt to remove any
        existing thumbnails from the ``small``, ``large``, or ``full``
        directories. In fact, SHIS uses this information to only create
        thumbnails if they haven't already been created. However, if this
        option is set, SHIS will clear all contents from ``thumb_dir``
        and start afresh.

    -s --selection : @after
        This option lets you select images on the website and copy file 
        names of selected images so you can later use them to sort/filter 
        images on the device according to your convenience.

    -p --port : @after
        This is the port on which the generated website shall be served. By
        default, this is set to 7447 (the T9 keys for ``shis``). If 7447 is
        not available, SHIS will try to use the next available port (7448,
        7449 and so on).

    -d --image-dir : @after
        SHIS will recursively scan this directory and all its subdirectories
        for image files.

        .. note::
            | SHIS categorizes a file as an image if the file ends in one
              of the following extensions:
            | ``jpeg``, ``jpg``, ``png``, or ``tiff``.

    -w --watch : @after
        SHIS can watch the filesystem for changes and keep the website up to
        date by automatically creating thumbnails for newer files and deleting
        them for old ones. This option specifies the time interval (in seconds)
        to wait before scanning the filesystem for changes. This ability to
        continuously monitor the filesystem is disabled by default.

    -n --pagination : @after
        This is the maximum number of thumbnails displayed in a single page on
        the website. The rest of the images are distributed across multiple
        pages.

    -o --order : @after
        This is the order in which images shall be displayed. You can either
        choose to sort images by their filename, shuffle them in random order,
        or choose to leave the order untouched.

    --thumb-dir : @after
        SHIS will store all processed files in this directory, the structure of
        which is as follows:

        .. code-block:: bash

            shis
            ├── small
            │   ├── image.jpg
            │   ..
            ├── large
            │   ..
            ├── full
            │   ├── image.jpg -> ../../image.jpg
            │   ..
            ├── static
            │   ..
            ├── html
            │   ..
            └── index.html


        Once processing is complete, ``small`` shall store small size thumbnails
        (default: 320px) of every image. If ``--previews`` is set, ``large``
        shall store large size previews (default: 1024px) of every image. If
        not, then it shall store symlinks to the original image in
        ``image_dir``. ``full`` shall always store symlinks to the original
        image in ``image_dir``.

        The ``static`` folder stores Javascript and CSS files required for the
        website. ``index.html`` is the first HTML page of the website. All other
        HTML pages are stored in ``html``.


    --previews : @after
        When a user clicks on a thumbnail in the generated website, a full
        screen preview opens up. By default, this is the original full size
        image being served. If this option is set, SHIS will explicitly create
        thumbnails for full screen previews (which will typically be much
        smaller in size compared to the original full size image) and serve
        them instead of the original full size image.

    --ncpus : @after
        This is the number of processes that will be spawned simultaneously.
        One of these processes will be used to run an HTTP Server and the
        others will be used parallely for the purpose of processing images.
        By default, SHIS is configured to use all available CPU cores for
        maximum performance.

    --thumb-size : @after
        This is the size of the thumbnails generated by SHIS. Note that this
        option also controls the size of the thumbnails displayed on the
        website.

    --preview-size : @after
        This is the size of the full screen preview generated by SHIS. Note
        that the website always displays fullscreen previews.
